<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item" aria-current="page">{{'Labels.master'| translate}}</li>
    <li class="breadcrumb-item active" aria-current="page">{{'Labels.studentRegistration'| translate}}</li>
  </ol>
</nav>
<app-page-statistics></app-page-statistics>

<mat-card class="plain-card">
  <mat-card-header class="card-header">
    <div class="d-flex flex-wrap align-items-center justify-content-between w-100">
      <div class="text-main fw-bold mb-2">
        {{'Labels.studentList'| translate}}
      </div>
      <div class="d-flex align-items-center justify-content-end gap-2">
        <button mat-flat-button class="btn-icon"
          [ngClass]="{'btn-main':!this.cardViewFlag, 'btn-second':this.cardViewFlag}" (click)="selectGrid('Table')">
          <mat-icon>
            format_list_bulleted
          </mat-icon>
        </button>
        <button mat-flat-button class="btn-second btn-icon"
          [ngClass]="{'btn-main':this.cardViewFlag, 'btn-second':!this.cardViewFlag}" (click)="selectGrid('Card')">
          <mat-icon>
            grid_view
          </mat-icon>
        </button>
        <button mat-flat-button class="btn-main btn-icon" [matMenuTriggerFor]="menu">
          <mat-icon>
            download
          </mat-icon>
        </button>
        <mat-menu #menu="matMenu" xPosition="before">
          <button mat-menu-item (click)="downloadPdf()">
            <div class="d-flex align-items-center justify-content-between w-100">
              <span>PDF</span>
              <i class='bx bxs-file-pdf text-danger'></i>
            </div>
          </button>
          <!-- <button mat-menu-item>
            <div class="d-flex align-items-center justify-content-between w-100">
              <span>Excel</span>
              <i class='bx bxs-file text-primary'></i>
            </div>
          </button> -->
        </mat-menu>
        <button mat-flat-button class="btn-main" (click)="addUpdateAgency()">
          <mat-icon>add</mat-icon>
          {{'Labels.addStudent'| translate}}
        </button>
      </div>
    </div>
  </mat-card-header>
  <mat-card-header class="card-header mb-0 pb-0">
    <div class="row w-100 gx-2">
      <div class="col-sm-auto">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>{{'Labels.searchByNameContactNo'| translate}}</mat-label>
          <input matInput placeholder="Search by Name/Contact" [formControl]="searchContent"
          (keypress)="validators.noFirstSpaceAllow($event)">

        </mat-form-field>
      </div>
      <!-- <div class="col-sm-auto">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Search by Contact</mat-label>
          <input matInput placeholder="Search by Contact">

        </mat-form-field>
      </div>
      <div class="col-sm-auto">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Search by Email</mat-label>
          <input matInput placeholder="Search by Email">
        </mat-form-field>
      </div> -->
      <div class="col-sm-auto">
        <button mat-flat-button class="btn-main" (click)="getTableData('filter')">{{'Labels.filter'| translate}}</button>
        <button mat-flat-button class="btn-second ms-2" (click)="clearForm()">{{'Labels.clear'| translate}}</button>
      </div>

    </div>
  </mat-card-header>

  <mat-card-content class="card-body">
    <ng-container *ngIf="!cardViewFlag">
      <app-table (recObjToChild)="childTableCompInfo($event)"></app-table>
    </ng-container>

    <ng-container *ngIf="cardViewFlag">
      <!-- <app-card-grid-view (recObjToChild)="childGridCompInfo($event)"></app-card-grid-view> -->
      <div class="row">
        <div class="col-sm-4 mb-3" *ngFor="let data of tableDataArray">
          <mat-card>
            <mat-card-header class="d-flex justify-content-end">
              <button mat-flat-button [matMenuTriggerFor]="menu">
                <span class="material-symbols-outlined">
                  more_horiz
                </span>
              </button>
              <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="addUpdateAgency(data)">Edit
                  <span class="material-symbols-outlined">
                    create
                  </span>
                </button>
                <button mat-menu-item (click)="deteleDialogOpen(data)">Delete
                  <span class="material-symbols-outlined">
                    delete
                  </span>
                </button>
              </mat-menu>
            </mat-card-header>
            <mat-card-content>
              <div class="text-center mb-3">
                <img [src]=" data.documentResponse[0]?.docPath || 'assets/images/user.jpg'" alt="" height="60px">
                <p>{{ languageFlag == 'EN' ? data.fullName : data.m_FullName}}</p>
              </div>
              <div class="row">
                <div class="col-sm  form-label">
                  {{'Labels.School'| translate}}
                </div>
                <div class=" col-sm  form-deta">
                  {{languageFlag == 'EN' ? data.schoolName: data.m_SchoolName}}
                </div>
              </div>
              <div class="row">
                <div class="col-sm form-label">
                 {{'Labels.contactNo.'| translate}}
                </div>
                <div class="col-sm form-deta">
                  {{data.parentMobileNo}}
                </div>
              </div>
              <div class="row">
                <div class=" col-sm form-label">
                  {{'Labels.gender'| translate}} 
                </div>
                <div class="col-sm form-deta">
                  {{ languageFlag == 'EN' ? data.gender:data.m_Gender}}
                </div>
              </div>
              <div class="text-center mb-3">
                <button mat-flat-button class="btn-main" (click)="openViewDilog(data)">Read More</button>
              </div>

            </mat-card-content>
          </mat-card>

        </div>
      </div>
      <ng-container *ngIf="tableDatasize > 10">
        <mat-paginator [length]="totalCount" [pageIndex]="cardCurrentPage" [pageSize]="10" [pageSizeOptions]="[10]"
        [showFirstLastButtons]="true" (page)="onPageChanged($event)">
      </mat-paginator>
      </ng-container>
    </ng-container>

  </mat-card-content>
</mat-card>